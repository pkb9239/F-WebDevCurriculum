# Quest 06. 인터넷의 이해

## Introduction
* 이번 퀘스트에서는 인터넷이 어떻게 동작하며, 서버와 클라이언트, 웹 브라우저 등의 역할은 무엇인지 알아보겠습니다.

## Topics
* 서버와 클라이언트, 그리고 웹 브라우저
* 인터넷을 구성하는 여러 가지 프로토콜
  * IP
  * TCP
  * HTTP
* DNS

## Resources
* [OSI 모형](https://ko.wikipedia.org/wiki/OSI_%EB%AA%A8%ED%98%95)
* [IP](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%84%B7_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  * [Online service Traceroute](http://ping.eu/traceroute/)
* [TCP](https://ko.wikipedia.org/wiki/%EC%A0%84%EC%86%A1_%EC%A0%9C%EC%96%B4_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  * [Wireshark](https://www.wireshark.org/download.html)
* [HTTP](https://ko.wikipedia.org/wiki/HTTP)
  * Chrome developer tool, Network tab
* [DNS](https://ko.wikipedia.org/wiki/%EB%8F%84%EB%A9%94%EC%9D%B8_%EB%84%A4%EC%9E%84_%EC%8B%9C%EC%8A%A4%ED%85%9C)
  * [Web-based Dig](http://networking.ringofsaturn.com/Tools/dig.php)

## Checklist
* 인터넷은 어떻게 동작하나요? Internet Protocol Suite의 레이어 모델에 입각하여 설명해 보세요.

  - Internet Protocol Suite : 컴퓨터들이 서로 정보를 주고 받는데 쓰이는 프로토콜 모음 (주로 TCP/IP)
    - 계층 구조
      - 응용 계층 : HTTP
      - 전송 계층 : TCP
      - 인터넷 계층 : IP
      - ARP : 주소 결정 프로토콜, IP 주소를 물리적 네트워크 주소로 대응시키기 위해 사용되는 프로토콜, 48비트의 네트워크 카드 주소를 뜻한다.
      - 네트워크 인터페이스 계층 : Ethernet, Wifi, ...

  * 근거리에서 서로 떨어진 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?
    - **유선** : 토큰링, 애플토크 등의 기술을 거쳐 현재는 이더넷을 흔히 사용한다
      - Ethernet: 다른 표준들을 대부분 대체한 네트워크 기술 규격
        - 각 기기들이 고유 MAC 주소를 갖고, 이 주소를 사용해 상호간에 데이터를 주고 받을 수 있도록 구성
        - 동작 절차는 다음과 같다
          1. 네트워크를 사용하려는 컴퓨터는 먼저 현재 네트워크 위에 흐르고 있는 데이터가 있는지를 감지한다.
          2. 만약 현재 다른 데이터가 전송 중이면 사용할 수 있을 때까지 기다리고 아니면 전송을 시작한다.
          3. 여러 군데에서 동시에 전송을 시작해 충돌이 발생하면 최소 패킷 시간 동안 전송을 계속해, 다른 컴퓨터가 충돌을 탐지할 수 있도록 한다.
          4. 그 뒤, 임의 시간 동안 기다린 뒤에 다시 신호(반송파)를 감지하고, 네트워크 사용자가 없으면 전송을 다시 시작한다.
          5. 전송을 마치면, 상위 계층에 전송이 끝났음을 알리고 끝마친다.
          6. 여러 번 다시 시도했음에도 전송에 실패하면 이를 상위 계층에 알리고 끝마친다.
      - USB: 직렬 포트, 병렬 포트 등 다양한 기존의 연결 방식을 대체하기 위해 만들어졌다.
        - USB 임플리멘터스 포럼에서 표준을 정하며, 인텔사가 주도하여 개발하고 있다.
        - 디바이스 연결을 감지하면, 이를 인식하고, 해당하는 드라이버를 로드하는 단계를 거친다
        - 등시성 전송 : 데이터의 전송 시간을 보증할 때 사용하는 타입
          - 데이터에 오류가 있어도 재전송을 하지 않는다 (ex. 스피커, 이어폰)
          - 토큰 패킷과 데이터 패킷으로 처리되는데, Host가 Out(토큰) 패킷을 보낸 이후 Data 패킷을 연달아 보내게 된다.
        - 이외에더 인터럽트, 벌크, 제어 전송 등이 있다.
        - 기기 클래스 개념이 존재하는데, 저장장치, 오디오 장치, I/O 장치 등에 따라서 MSC, ADC, HID 클래스로 나뉘게 된다.
    - **무선**
      - Wifi (무선 LAN): 802.11 표준에 기반하여 Wifi라는 이름으로도 잘 알려져있다
        - 지원 범위가 한정적이거나, 보안성이 좋지 못하다는 단점이 있다.
        - 2.4 또는 5GHZ 주파수 영역을 사용하며, 각 주파수에는 채널이 존재하는데 20, 40, 80, 160 MHZ 너비로 구분된다.
        - 표준에 따라 ax, ac, b, g, n 등으로 나뉘며 각 표준마다 지원 주파수, 채널 너비, 최대 데이터 속도 등이 상이하다.
      - 블루투스: 단파 전파를 사용하는 전자 장비 간의 근거리 데이터 통신 방식
        - 에릭슨의 사내 프로젝트로 개발 시작되었으며 현재는 블루투스 SIG 라는 단체에 의해 관리되고 있다.
        - 2.4GHZ 대역을 사용하여 Wifi와 간섭이 발생할 가능성이 있다.
        - 버전업이 진행되면서 보안성, 속도, 유효 거리 등의 개선이 있었다.
  * 근거리에 있는 여러 대의 전자기기가 서로 통신하는 프로토콜은 어떻게 동작할까요?
    * LAN + 허브? Wifi?
  * 아주 멀리 떨어져 있는 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?
    * WAN : LAN 규모의 통신망을 여러개 묶어서 서로 통신할 수 있도록 구성
      - 따라서 먼 거리에 있는 (다른 지역에 있는) LAN 사용자들과 데이터 통신을 할 수 있도록 해준다
      - 패킷 교환 방식을 주로 사용하는데, 네트워크 자원을 패킷 단위로 나누어 이를 전송함으로써 높은 회선 효율성과, 전송 지연 감소를 통해 통신 안정성을 확보할 수 있다.
  * 두 전자기기가 신뢰성을 가지고 통신할 수 있도록 하기 위한 프로토콜은 어떻게 동작할까요?
    * TCP, UDP, IP의 checksum을 통해 데이터를 검증
  * HTTP는 어떻게 동작할까요?
    * 요청, 응답 구조로 되어있다.
    * Stateless, 요청과 그에 따른 응답이 존재할 뿐, 다른 요청/응답과 연결되어있지 않고, 독립적으로 동작한다.
    * 구조
      - Start line : 실행되어야 할 요청 또는 수행에 대한 성공 또는 실패를 나타냅니다. 항상 한 줄 입니다.
        - 요청의 경우 HTTP 메서드(GET,POST,PUT,PATCH 등) 혹은 명사(HEAD, OPTIONS) 를 사용해 서버가 수행해야 할 동작을 나타냅니다.
        - 요청 타겟은 주로 URL, 또는 프로토콜, 포트, 도메인의 절대 경로로 나타낼 수도 있습니다.
        - 응답의 경우 프로토콜 버전, 상태코드, 상태 텍스트를 갖고 있습니다.
      - Header : 요청에 대한 설명 혹은 메시지 본문에 대한 설명이 존재합니다.
        - key : value 쌍의 형태를 갖습니다.
        - 요청 헤더 종류로는 request, entity, general 헤더가 있습니다.
        - 응답 헤더 종류로는 response, entity, general 헤더가 있습니다.
      - Blank line : 모든 메타 정보가 전송되었음을 알리는 빈 줄이 삽입됩니다.
      - Body : 요청과 관련된 내용이 옵션으로 들어가거나, 응답과 관련된 문서가 들어갑니다. 본문의 존재 유무 및 크기는 첫 줄과 HTTP 헤더에 명시됩니다.
    * 시작 줄과 헤더를 묶어서 Head 라고 부릅니다.
    * HTTP/2 에서는 위 메시지를 프레임 단위로 나누어 압축 후 사용합니다.

* 우리가 브라우저의 주소 창에 www.knowre.com 을 쳤을 때, 어떤 과정을 통해 서버의 IP 주소를 알게 될까요?

  * 사용자가 입력한 도메인 주소를 IP로 변경하는 과정이 필요.
  * 이를 담당하는 시스템이 DNS(Domain Name System)이다


## Quest
* tracert(Windows가 아닌 경우 traceroute) 명령을 통해 www.google.com 까지 가는 경로를 찾아 보세요.
  * 어떤 IP주소들이 있나요?
  * 그 IP주소들은 어디에 위치해 있나요?
* Wireshark를 통해 www.google.com 으로 요청을 날렸을 떄 어떤 TCP 패킷이 오가는지 확인해 보세요
  * TCP 패킷을 주고받는 과정은 어떻게 되나요?
  * 각각의 패킷에 어떤 정보들이 담겨 있나요?
* telnet 명령을 통해 http://www.google.com/ URL에 HTTP 요청을 날려 보세요.
  * 어떤 헤더들이 있나요?
  * 그 헤더들은 어떤 역할을 하나요?

## Advanced
* HTTP의 최신 버전인 HTTP/3는 어떤 식으로 구성되어 있을까요?
* TCP/IP 외에 전세계적인 네트워크를 구성하기 위한 다른 방식도 제안된 바 있을까요?
